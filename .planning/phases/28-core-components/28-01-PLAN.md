---
phase: 28-core-components
plan: 01
type: execute
domain: ui-components
---

<objective>
Create premium interactive components for the v2.0 Design Refresh: MagneticButton, FloatingLabelInput, and StatCard with animated counter.

Purpose: Build the core interactive components that will be used across onboarding, generation, and output display pages.
Output: 4 new files - MagneticButton component, FloatingLabelInput component, useCounter hook, and StatCard component.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Design System Reference:**
@.planning/docs/AI-GOS-DESIGN-SYSTEM.md

**Phase 27 Foundation (completed):**
@.planning/phases/27-design-foundation/27-02-SUMMARY.md

**Existing utilities to use:**
@src/lib/motion.ts - Springs (snappy, smooth), easings, variants (fadeUp, scaleIn)
@src/components/ui/gradient-border.tsx - GradientBorder wrapper

**Existing shadcn/ui components for reference:**
@src/components/ui/button.tsx - Button with CVA variants
@src/components/ui/input.tsx - Base Input component

**Prior decisions affecting this phase:**
- Use Framer Motion for all animations (Phase 27)
- Use CSS variables for design tokens (--accent-blue, --text-secondary, etc.)
- Follow kebab-case.tsx naming convention
- Components go in src/components/ui/

**Codebase constraints:**
- "use client" directive required for interactive components
- Import motion utilities from @/lib/motion
- Use cn() from @/lib/utils for className merging
- Follow existing CVA pattern for variant components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MagneticButton component</name>
  <files>src/components/ui/magnetic-button.tsx</files>
  <action>
Create a MagneticButton component that wraps children with physics-based magnetic hover effect.

Implementation:
1. Use Framer Motion's useMotionValue for x and y position tracking
2. On mouse move: Calculate offset from button center, apply 0.15 multiplier for subtle attraction
3. On mouse leave: Reset x and y to 0 with spring transition
4. Use motion.button with style={{ x, y }} for the magnetic effect
5. Apply whileHover={{ scale: 1.02 }} and whileTap={{ scale: 0.98 }} for feedback
6. Use springs.snappy from @/lib/motion for the reset transition

Props interface:
- children: React.ReactNode
- className?: string
- All standard button props via React.ComponentProps<"button">

Do NOT add glow or gradient effects - this is purely the magnetic physics interaction. Other styling comes from composition with Button variants.

Reference from design system:
```javascript
const handleMouse = (e) => {
  const rect = e.target.getBoundingClientRect();
  const centerX = rect.left + rect.width / 2;
  const centerY = rect.top + rect.height / 2;
  x.set((e.clientX - centerX) * 0.15);
  y.set((e.clientY - centerY) * 0.15);
};
```
  </action>
  <verify>
- File exists at src/components/ui/magnetic-button.tsx
- npm run build passes without TypeScript errors
- Component exports MagneticButton as named export
  </verify>
  <done>
MagneticButton component created with useMotionValue-based magnetic hover effect, proper TypeScript types, and spring-based reset animation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create FloatingLabelInput component</name>
  <files>src/components/ui/floating-label-input.tsx</files>
  <action>
Create a FloatingLabelInput with underline style and animated floating label per design system spec.

Implementation:
1. Track focused state with useState
2. Derive hasValue from value prop (controlled) or internal ref check
3. Animate label with motion.label:
   - When focused OR hasValue: y: -24, scale: 0.85, color: var(--accent-blue)
   - Default: y: 0, scale: 1, color: var(--text-tertiary)
   - transformOrigin: 'left'
4. Input styling (underline style, NOT bordered):
   - background: transparent
   - border: none
   - borderBottom: 1px solid var(--border-default)
   - padding: 16px 0
   - color: var(--text-primary)
   - fontSize: 16px
5. Gradient focus line with motion.div:
   - scaleX: focused ? 1 : 0
   - transformOrigin: 'left'
   - height: 2px
   - background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple))
   - Position absolute at bottom

Props interface:
- label: string (required)
- value?: string
- onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void
- className?: string
- All standard input props

Use durations.normal (0.3s) for label animation.
  </action>
  <verify>
- File exists at src/components/ui/floating-label-input.tsx
- npm run build passes without TypeScript errors
- Component exports FloatingLabelInput as named export
  </verify>
  <done>
FloatingLabelInput component created with animated floating label, underline style, and gradient focus line indicator.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create useCounter hook and StatCard component</name>
  <files>src/hooks/use-counter.ts, src/components/ui/stat-card.tsx</files>
  <action>
Create useCounter hook and StatCard component with animated number and hover effects.

**Part A: useCounter hook (src/hooks/use-counter.ts)**
1. Parameters: target (number), duration (number, default 1500ms)
2. Use useState to track current value
3. Use useEffect with requestAnimationFrame loop:
   - Calculate elapsed time from start
   - Calculate progress (0-1) clamped to 1
   - Apply ease-out cubic: 1 - Math.pow(1 - progress, 3)
   - Set value to Math.floor(target * eased)
   - Continue loop until progress >= 1
4. Return the animated value
5. Re-run effect when target changes

**Part B: StatCard component (src/components/ui/stat-card.tsx)**
Props interface:
- value: number (the target number to animate to)
- label: string (description below the number)
- icon?: React.ReactNode (optional Lucide icon)
- delay?: number (stagger delay in ms, default 0)
- className?: string

Implementation:
1. Use useCounter(value, 2000) for animated number
2. Track hovered state with useState
3. Wrap in motion.div with fadeUp variant and delay
4. Hover glow effect (motion.div):
   - opacity: hovered ? 1 : 0
   - radial-gradient with accent-blue at 15% opacity
   - inset: -20px, pointerEvents: none
5. Icon display at 60% opacity, marginBottom: 16px
6. Number display:
   - font-family: var(--font-mono)
   - fontSize: 42px, fontWeight: 700
   - letterSpacing: -0.03em
   - Apply gradient text effect (--gradient-text)
7. Label: fontSize: 13px, color: var(--text-tertiary), fontWeight: 500
8. Bottom line accent (motion.div):
   - width: hovered ? '100%' : '40%'
   - height: 1px
   - background: linear-gradient(90deg, rgba(59,130,246,0.5), transparent)
   - position absolute bottom, left padding offset

Use toLocaleString() for number formatting (adds commas).
  </action>
  <verify>
- File exists at src/hooks/use-counter.ts
- File exists at src/components/ui/stat-card.tsx
- npm run build passes without TypeScript errors
- useCounter exports as named export
- StatCard exports as named export
  </verify>
  <done>
useCounter hook created with ease-out cubic animation, StatCard component created with animated counter, hover glow, gradient text number, and expanding line accent.
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes (or only has pre-existing warnings)
- [ ] All 4 files created in correct locations
- [ ] All components use "use client" directive
- [ ] All components properly typed with TypeScript
- [ ] Motion utilities imported from @/lib/motion where applicable
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- MagneticButton provides physics-based hover attraction
- FloatingLabelInput animates label on focus/value
- useCounter animates from 0 to target with easing
- StatCard displays animated number with hover effects
- No TypeScript errors introduced
</success_criteria>

<output>
After completion, create `.planning/phases/28-core-components/28-01-SUMMARY.md`:

# Phase 28 Plan 01: Core Components Summary

**[Substantive one-liner describing what shipped]**

## Performance

- **Duration:** X min
- **Started:** [timestamp]
- **Completed:** [timestamp]
- **Tasks:** 3
- **Files created:** 4

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created

- `src/components/ui/magnetic-button.tsx` - Description
- `src/components/ui/floating-label-input.tsx` - Description
- `src/hooks/use-counter.ts` - Description
- `src/components/ui/stat-card.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[Ready for Phase 29: Onboarding Refresh]
</output>
