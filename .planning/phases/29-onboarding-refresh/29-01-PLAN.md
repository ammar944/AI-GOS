---
phase: 29-onboarding-refresh
plan: 01
type: execute
---

<objective>
Refresh OnboardingWizard container with v2.0 design system: GradientBorder card wrapper, animated progress bar, and step indicators with Framer Motion.

Purpose: Establish the premium visual foundation for the onboarding flow before refreshing individual steps.
Output: Updated wizard component with design system styling, new FloatingLabelTextarea component.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/docs/AI-GOS-DESIGN-SYSTEM.md

**Design System Requirements:**
- Background: --bg-elevated (#0a0a0a) for cards
- Borders: --border-default (rgba(255,255,255,0.06))
- Text: --text-primary (#ffffff), --text-secondary (#a0a0a0), --text-tertiary (#666666)
- Accent: --accent-blue (#3b82f6), --accent-purple (#8b5cf6)
- Gradients: --gradient-accent for borders, --gradient-primary for active states
- Font: Geist Sans (already configured via --font-geist-sans)
- Spacing: 4px grid (--space-* tokens)
- Border radius: --radius-lg (12px) for cards, --radius-md (8px) for smaller elements

**Motion patterns from Phase 27-28:**
@src/lib/motion.ts - springs, easings, fadeUp, staggerContainer, staggerItem, durations

**Existing v2.0 components:**
@src/components/ui/gradient-border.tsx
@src/components/ui/floating-label-input.tsx
@src/components/ui/magnetic-button.tsx

**Current implementation:**
@src/components/onboarding/onboarding-wizard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FloatingLabelTextarea component</name>
  <files>src/components/ui/floating-label-textarea.tsx</files>
  <action>
Create FloatingLabelTextarea following the same pattern as FloatingLabelInput:
- Animated floating label using motion.label with y/-24, scale/0.85 transitions
- Gradient focus line at bottom (--gradient-accent)
- Use CSS variables: --text-primary, --text-tertiary, --accent-blue, --border-default
- Support rows prop for textarea height
- Include proper aria attributes and id generation with useId()
- Export from component for use in step forms

Style specifics:
- Label: text-[14px], font-medium, pointer-events-none
- Textarea: bg-transparent, border-none, border-bottom 1px solid var(--border-default)
- Focus line: h-[2px], gradient from --accent-blue to --accent-purple, scaleX animation
- Padding: py-4 (16px) to match design system spacing
  </action>
  <verify>npm run build passes, component exports correctly</verify>
  <done>FloatingLabelTextarea component created with animated label and gradient focus line</done>
</task>

<task type="auto">
  <name>Task 2: Wrap wizard form card with GradientBorder</name>
  <files>src/components/onboarding/onboarding-wizard.tsx</files>
  <action>
Replace the Card wrapper with GradientBorder component:

1. Import GradientBorder from @/components/ui/gradient-border
2. Import motion from framer-motion
3. Import fadeUp, staggerContainer from @/lib/motion

4. Replace the form Card (line ~377) with:
```tsx
<GradientBorder className="overflow-hidden">
  <motion.div
    className="p-6 md:p-8"
    style={{ background: 'var(--bg-elevated)' }}
    variants={fadeUp}
    initial="initial"
    animate="animate"
    transition={{ duration: 0.6, ease: [0.21, 0.45, 0.27, 0.9] }}
  >
    {renderStepContent()}
  </motion.div>
</GradientBorder>
```

5. Remove the old Card and CardContent imports if no longer needed

6. Add key={currentStep} to the motion.div to trigger animation on step change
  </action>
  <verify>npm run build passes, form card has gradient border effect</verify>
  <done>Form card wrapped with GradientBorder, fadeUp animation on step change</done>
</task>

<task type="auto">
  <name>Task 3: Animate progress bar and step indicators</name>
  <files>src/components/onboarding/onboarding-wizard.tsx</files>
  <action>
Update progress header section with v2.0 design:

1. Progress bar styling:
- Replace shadcn Progress with custom animated progress bar
- Background: var(--bg-hover) (#111111)
- Fill: var(--gradient-primary) linear-gradient
- Height: h-2 (8px)
- Border radius: rounded-full
- Use motion.div with width animation based on progress percentage

```tsx
<div className="h-2 rounded-full overflow-hidden" style={{ background: 'var(--bg-hover)' }}>
  <motion.div
    className="h-full rounded-full"
    style={{ background: 'var(--gradient-primary)' }}
    initial={{ width: 0 }}
    animate={{ width: `${progress}%` }}
    transition={{ duration: 0.5, ease: [0.21, 0.45, 0.27, 0.9] }}
  />
</div>
```

2. Step counter text styling:
- "Step X of Y": text-[14px] font-medium, color: var(--text-primary)
- "X% complete": text-[14px], color: var(--text-tertiary)

3. Step indicator circles (desktop):
- Completed: background var(--accent-blue), border var(--accent-blue)
- Current: border var(--accent-blue), background transparent, pulse animation
- Upcoming: border var(--border-default), background var(--bg-hover)
- Add scale animation on current step with motion.div

4. Step labels:
- Current: var(--text-primary), font-semibold
- Completed: var(--text-secondary)
- Upcoming: var(--text-tertiary)

5. Mobile step indicator:
- Icon container: gradient background using --gradient-primary
- Step title: text-[16px] font-medium var(--text-primary)
- Subtitle: text-[14px] var(--text-tertiary)
  </action>
  <verify>npm run build passes, progress bar animates smoothly, step indicators show correct states</verify>
  <done>Progress bar has gradient fill animation, step indicators use design system colors and animations</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] FloatingLabelTextarea animates label on focus/blur
- [ ] GradientBorder wraps form card with subtle gradient effect
- [ ] Progress bar shows gradient fill with smooth animation
- [ ] Step indicators use correct colors for completed/current/upcoming states
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Wizard visually matches v2.0 design system aesthetic
</success_criteria>

<output>
After completion, create `.planning/phases/29-onboarding-refresh/29-01-SUMMARY.md`
</output>
