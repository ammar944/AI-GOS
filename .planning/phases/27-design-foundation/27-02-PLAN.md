---
phase: 27-design-foundation
plan: 02
type: execute
---

<objective>
Create core foundation components: Grain overlay, motion utilities, and GradientBorder.

Purpose: Build the primitive components and utilities that all v2.0 Design Refresh UI components will use.
Output: Grain.tsx, motion.ts, and GradientBorder.tsx components ready for use across the application.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/docs/AI-GOS-DESIGN-SYSTEM.md
@.planning/docs/aigis-soul.jsx

**Prior plan context:**
27-01 installed framer-motion, configured Geist Sans, and added CSS design tokens.

**Design spec patterns:**
- Grain: Fixed overlay with SVG noise filter at 3% opacity
- Motion: Spring presets (snappy, smooth, gentle, bouncy) and easing curves
- GradientBorder: 1px padding wrapper with gradient background, optional animation

**Relevant source files:**
@src/app/globals.css
@src/components/ui/button.tsx (for component pattern reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Grain texture overlay component</name>
  <files>src/components/ui/grain.tsx</files>
  <action>
    Create Grain component following the design spec pattern:

    ```tsx
    "use client";

    export function Grain() {
      return (
        <div
          aria-hidden="true"
          className="pointer-events-none fixed inset-0 z-[1000]"
          style={{
            opacity: 0.03,
            backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`,
          }}
        />
      );
    }
    ```

    Key details:
    - "use client" directive (uses inline styles)
    - aria-hidden="true" for accessibility
    - Fixed positioning with z-[1000] to overlay everything
    - pointer-events-none so it doesn't block interactions
    - 3% opacity for subtle analog warmth effect
    - SVG data URL with fractalNoise filter
  </action>
  <verify>Import Grain in a test page, renders without errors, grain texture visible at 3% opacity over content</verify>
  <done>Grain component exists at src/components/ui/grain.tsx, exports Grain function</done>
</task>

<task type="auto">
  <name>Task 2: Create motion utilities with spring presets</name>
  <files>src/lib/motion.ts</files>
  <action>
    Create motion.ts with Framer Motion spring presets and animation variants:

    ```typescript
    import type { Transition, Variants } from "framer-motion";

    // Spring presets for different interaction types
    export const springs = {
      // Quick, snappy (buttons, toggles)
      snappy: { type: "spring", stiffness: 500, damping: 30 } as const,

      // Smooth, natural (cards, panels)
      smooth: { type: "spring", stiffness: 400, damping: 30 } as const,

      // Gentle, elegant (page transitions)
      gentle: { type: "spring", stiffness: 300, damping: 35 } as const,

      // Bouncy (attention-grabbing)
      bouncy: { type: "spring", stiffness: 400, damping: 15 } as const,
    } satisfies Record<string, Transition>;

    // Easing curves for tween animations
    export const easings = {
      // Smooth deceleration
      out: [0.21, 0.45, 0.27, 0.9] as const,

      // Smooth acceleration-deceleration
      inOut: [0.4, 0, 0.2, 1] as const,

      // Quick start, slow end
      expo: [0.16, 1, 0.3, 1] as const,
    };

    // Common animation variants
    export const fadeUp: Variants = {
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
    };

    export const fadeDown: Variants = {
      initial: { opacity: 0, y: -20 },
      animate: { opacity: 1, y: 0 },
    };

    export const fadeLeft: Variants = {
      initial: { opacity: 0, x: -30 },
      animate: { opacity: 1, x: 0 },
    };

    export const fadeRight: Variants = {
      initial: { opacity: 0, x: 30 },
      animate: { opacity: 1, x: 0 },
    };

    export const scaleIn: Variants = {
      initial: { opacity: 0, scale: 0.95 },
      animate: { opacity: 1, scale: 1 },
    };

    // Stagger container for child animations
    export const staggerContainer: Variants = {
      animate: {
        transition: {
          staggerChildren: 0.1,
        },
      },
    };

    // Stagger item (use as child of staggerContainer)
    export const staggerItem: Variants = {
      initial: { opacity: 0, y: 20 },
      animate: { opacity: 1, y: 0 },
    };

    // Duration guidelines (in seconds)
    export const durations = {
      fast: 0.15,      // Hover states
      normal: 0.3,     // Standard transitions
      slow: 0.5,       // Panel slides
      slower: 0.8,     // Page transitions
    } as const;
    ```

    This provides a consistent animation vocabulary across all v2.0 components.
  </action>
  <verify>TypeScript compiles without errors, imports work: import { springs, fadeUp } from "@/lib/motion"</verify>
  <done>motion.ts exists with springs, easings, variants, and durations exported</done>
</task>

<task type="auto">
  <name>Task 3: Create GradientBorder component</name>
  <files>src/components/ui/gradient-border.tsx</files>
  <action>
    Create GradientBorder component for premium card effects:

    ```tsx
    "use client";

    import { cn } from "@/lib/utils";

    interface GradientBorderProps {
      children: React.ReactNode;
      className?: string;
      innerClassName?: string;
      animate?: boolean;
    }

    export function GradientBorder({
      children,
      className,
      innerClassName,
      animate = false,
    }: GradientBorderProps) {
      return (
        <div
          className={cn("relative rounded-2xl p-px", className)}
          style={{
            background: animate
              ? "linear-gradient(135deg, rgba(59,130,246,0.5), rgba(139,92,246,0.3), rgba(59,130,246,0.1), rgba(139,92,246,0.5))"
              : "linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05), rgba(255,255,255,0.02))",
            backgroundSize: animate ? "300% 300%" : "100% 100%",
            animation: animate ? "gradientShift 8s ease infinite" : "none",
          }}
        >
          <div
            className={cn(
              "h-full rounded-[15px] bg-[#0a0a0a]",
              innerClassName
            )}
          >
            {children}
          </div>
        </div>
      );
    }
    ```

    Key details:
    - "use client" directive for style interpolation
    - Uses cn() utility for className merging
    - rounded-2xl (16px) outer, rounded-[15px] inner (1px less for clean edge)
    - p-px creates 1px gradient border
    - animate prop enables gradient animation (uses gradientShift keyframe from 27-01)
    - Static gradient uses white opacity for subtle border
    - Animated gradient uses blue/purple for premium effect
    - bg-[#0a0a0a] matches --bg-elevated token
  </action>
  <verify>Import in test page, renders with gradient border, animate={true} shows moving gradient</verify>
  <done>GradientBorder component exports from src/components/ui/gradient-border.tsx, both static and animated variants work</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] `npm run lint` passes
- [ ] Grain component renders film grain overlay
- [ ] motion.ts exports are importable
- [ ] GradientBorder renders with border effect
- [ ] GradientBorder animate={true} shows animated gradient
</verification>

<success_criteria>
- All 3 foundation components created
- TypeScript types are correct
- Components follow existing codebase conventions
- Phase 27 complete - foundation ready for Phase 28 (Core Components)
</success_criteria>

<output>
After completion, create `.planning/phases/27-design-foundation/27-02-SUMMARY.md`

Update STATE.md:
- Phase 27 complete
- Ready for Phase 28: Core Components
</output>
