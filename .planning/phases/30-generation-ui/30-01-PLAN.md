---
phase: 30-generation-ui
plan: 01
type: execute
domain: ui
---

<objective>
Create Pipeline progress indicator and GenerationStats components with v2.0 design system animations.

Purpose: Establish the visual foundation for the generation UI with premium animated components that show generation progress through multi-stage pipeline visualization and real-time stats.
Output: Pipeline.tsx component, GenerationStats.tsx component, basic integration into /generate page.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/docs/AI-GOS-DESIGN-SYSTEM.md

**Prior decisions affecting this phase:**
- Phase 28: MagneticButton, FloatingLabelInput, useCounter hook, StatCard established
- Phase 28: HTMLMotionProps for motion components, useSpring for physics-based animation
- Phase 29: v2.0 design tokens applied throughout /generate page

**Relevant source files:**
@src/app/generate/page.tsx
@src/components/ui/stat-card.tsx
@src/components/ui/magnetic-button.tsx
@src/lib/motion.ts
@src/hooks/use-counter.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Pipeline component</name>
  <files>src/components/pipeline/pipeline.tsx, src/components/pipeline/index.ts</files>
  <action>
Create Pipeline component following design spec pattern (lines 719-808 of AI-GOS-DESIGN-SYSTEM.md):

1. Props interface:
   - stages: string[] (stage names)
   - currentStageIndex: number (0-based, -1 for not started)
   - Optional className

2. Stage rendering:
   - Each stage has: status dot, label, background styling
   - States: complete (green dot, success bg), active (blue dot with pulse ring, accent bg), pending (gray dot, transparent)
   - Use Geist Mono for stage labels

3. Connection lines between stages:
   - Static background line (#222)
   - Animated fill line (green for complete) using motion.div with x animation
   - Width: 32px, height: 2px

4. Pulse ring for active stage:
   - motion.div with scale [1, 2, 1] and opacity [0.5, 0, 0.5]
   - duration: 1.5s, repeat: Infinity
   - Blue (#3b82f6) background

5. Wrapper styling:
   - flex, items-center, gap-8
   - padding: 20px 24px
   - background: rgba(255,255,255,0.02)
   - border: 1px solid var(--border-default)
   - borderRadius: 12px

Export from index.ts barrel file.
  </action>
  <verify>TypeScript compiles without errors: npx tsc --noEmit</verify>
  <done>Pipeline component renders stages with correct visual states and animations</done>
</task>

<task type="auto">
  <name>Task 2: Create GenerationStats component</name>
  <files>src/components/pipeline/generation-stats.tsx</files>
  <action>
Create GenerationStats component that displays a grid of StatCards for generation metrics:

1. Props interface:
   - elapsedTime: number (milliseconds)
   - estimatedCost: number (dollars)
   - completedSections: number
   - totalSections: number
   - Optional className

2. Grid layout:
   - 4 columns on desktop (grid-cols-4)
   - 2 columns on mobile (grid-cols-2)
   - gap-4

3. Stats to display using existing StatCard component:
   - Time: elapsedTime formatted as "Xs" with Clock icon
   - Cost: estimatedCost formatted as "$0.0000" with Coins icon
   - Progress: "completedSections/totalSections" with CheckCircle2 icon
   - Rate: Calculate sections/minute with Zap icon

4. Use useCounter hook for animated number transitions
5. Apply stagger animation (100ms delay between cards)
6. Import icons from lucide-react

Add export to src/components/pipeline/index.ts barrel file.
  </action>
  <verify>TypeScript compiles without errors: npx tsc --noEmit</verify>
  <done>GenerationStats displays 4 animated stat cards with proper formatting</done>
</task>

<task type="auto">
  <name>Task 3: Integrate Pipeline and Stats into generating state</name>
  <files>src/app/generate/page.tsx</files>
  <action>
Transform the generating-blueprint state (lines 384-492) to use new components:

1. Import Pipeline and GenerationStats from @/components/pipeline

2. Define BLUEPRINT_STAGES constant array:
   ["Industry", "ICP", "Offer", "Competitors", "Synthesis"]

3. Add state for elapsed time tracking:
   - useState for startTime (set when entering generating state)
   - useEffect with setInterval to update elapsed time every 100ms
   - Clean up interval when leaving generating state

4. Replace current spinner Card with:
   - GradientBorder wrapper (from @/components/ui/gradient-border)
   - Header section with title "Generating Strategic Blueprint" and subtitle
   - Pipeline component showing current stage progress
   - GenerationStats component showing metrics
   - Current section indicator with animated loader

5. Map blueprintProgress.completedSections to currentStageIndex:
   - Calculate based on completed sections count
   - Use STRATEGIC_BLUEPRINT_SECTION_LABELS mapping

6. Apply entrance animations:
   - Container: fadeUp with stagger
   - Pipeline: delay 0.2s
   - Stats: delay 0.3s

7. Remove old Progress bar, Badge list, and simple spinner
  </action>
  <verify>npm run build succeeds without errors</verify>
  <done>Generating state shows Pipeline progress and animated stats instead of spinner</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npx tsc --noEmit` passes type checking
- [ ] Pipeline component renders all 5 stages
- [ ] GenerationStats shows 4 animated stat cards
- [ ] No console errors in browser
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Pipeline shows stage transitions with animations
- Stats display with counter animations
- Visual hierarchy follows v2.0 design system
</success_criteria>

<output>
After completion, create `.planning/phases/30-generation-ui/30-01-SUMMARY.md`

# Phase 30 Plan 01: Pipeline & Stats Components Summary

**[Substantive one-liner - what shipped]**

## Performance
- **Duration:** X min
- **Tasks:** 3
- **Files created/modified:** 4

## Accomplishments
- [Key outcomes]

## Files Created/Modified
- `path/to/file.ts` - Description

## Decisions Made
[Key decisions and rationale, or "None"]

## Issues Encountered
[Problems and resolutions, or "None"]

## Next Step
Ready for 30-02-PLAN.md (Streaming Generation Display)
</output>
