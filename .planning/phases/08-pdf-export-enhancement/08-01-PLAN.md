# Plan 08-01: HTML-to-Canvas PDF Generation

## Goal
Fix the PDF export button to display strategic research exactly like the review UI, with full visual styling (badges, progress bars, colors, icons, grids).

## Background
- Current PDF uses jsPDF with manual text rendering - loses all visual formatting
- User wants PDF to match the styled UI in strategic research review
- html2canvas approach captures the styled HTML as an image for exact visual match

## Approach
Use html2canvas to capture a print-optimized React component, then convert to multi-page PDF with jsPDF.

## Tasks

### Task 1: Create print-optimized PDF export content component
**File:** `src/components/strategic-blueprint/pdf-export-content.tsx`

- Create `PdfExportContent` component with print-friendly inline styles
- Use fixed color values (not CSS variables) for html2canvas compatibility
- Render all 5 sections with full data and styling:
  - Category Snapshot grid
  - Market Dynamics with icons
  - Pain Points with color-coded headers
  - Psychological Drivers cards
  - Audience Objections
  - Status banners with color-coded backgrounds
  - Progress bars for scores
  - Competitor cards with strengths/weaknesses
  - Gaps & Opportunities color-coded cards
  - Next Steps with numbered circles
- Fixed width container (A4 proportions: 794px)
- Light background (white) for PDF readability

### Task 2: Update PDF export function
**File:** `src/components/strategic-blueprint/strategic-blueprint-display.tsx`

- Import `PdfExportContent` and `createRoot`
- Replace jsPDF text rendering with html2canvas approach:
  1. Create temporary hidden container
  2. Render `PdfExportContent` into container using React's `createRoot`
  3. Wait for React render to complete
  4. Capture with html2canvas (scale: 2 for quality)
  5. Clean up temporary container
  6. Convert canvas to multi-page PDF
  7. Handle page breaks by calculating height offsets

### Task 3: Error handling
- Add try/catch with user-friendly error message
- Clean up container on failure
- Alert user if export fails

## Files Modified
- `src/components/strategic-blueprint/strategic-blueprint-display.tsx` - Updated handleExportPDF

## Files Created
- `src/components/strategic-blueprint/pdf-export-content.tsx` - Print-optimized section renderer

## Dependencies
- html2canvas (already installed via html2pdf.js)
- jspdf (already installed)

## Testing
- Build passes with no TypeScript errors
- PDF export generates multi-page document
- All 5 sections render with full styling
- Colors, badges, progress bars visible in PDF

## Success Criteria
- [x] PDF shows all 5 sections with full styling
- [x] Multi-page PDF with proper page breaks
- [x] Works with html2canvas (inline styles avoid CSS variable issues)
- [x] Build passes

---
*Phase: 08-pdf-export-enhancement*
*Created: 2025-12-29*
