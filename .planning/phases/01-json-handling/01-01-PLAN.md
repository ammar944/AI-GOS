---
phase: 01-json-handling
plan: 01
type: execute
---

<objective>
Create Zod validation schemas for all 11 media plan section types.

Purpose: Enable runtime validation of AI responses before accepting them, catching malformed data early.
Output: `src/lib/media-plan/schemas.ts` with Zod schemas matching all TypeScript interfaces in `output-types.ts`.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/STACK.md
@.planning/codebase/CONVENTIONS.md

@src/lib/media-plan/output-types.ts

**Codebase constraints:**
- TypeScript strict mode enabled
- Use kebab-case for file names
- Named exports preferred
- 2-space indentation, double quotes, semicolons
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Zod dependency</name>
  <files>package.json</files>
  <action>Run `npm install zod` to add Zod as a dependency. Zod is the standard TypeScript-first schema validation library and works perfectly with Next.js.</action>
  <verify>npm ls zod shows zod installed, package.json includes zod in dependencies</verify>
  <done>Zod is installed and available for import</done>
</task>

<task type="auto">
  <name>Task 2: Create Zod schemas for all 11 media plan sections</name>
  <files>src/lib/media-plan/schemas.ts</files>
  <action>
Create a new file `src/lib/media-plan/schemas.ts` with Zod schemas for all section types.

**Structure:**
1. Import z from "zod"
2. Create schemas for all union types first (BusinessGoal, MarketingObjective, etc.)
3. Create schemas for nested interfaces (PlatformLogic, AudienceSegment, etc.)
4. Create schemas for each of the 11 sections
5. Export individual section schemas and a combined MediaPlanOutputSchema

**Key schemas to create (in order):**
- executiveSummarySchema
- campaignObjectiveSelectionSchema
- keyInsightsFromResearchSchema
- icpAndTargetingStrategySchema
- platformAndChannelStrategySchema
- funnelStrategySchema
- creativeStrategySchema
- campaignStructureSchema
- kpisAndPerformanceModelSchema
- budgetAllocationAndScalingSchema
- risksAndMitigationSchema

**Important:**
- Use z.enum() for string literal unions
- Use z.object().passthrough() for top-level schemas to allow extra fields from AI
- Mark optional fields correctly with .optional()
- Use .array() for array fields
- Numbers should use z.number() with appropriate constraints
- Export both individual schemas and section names array

**Pattern:**
```typescript
export const executiveSummarySchema = z.object({
  strategyOverview: z.string(),
  timelineFocus: z.string(),
  strategicPriorities: z.array(z.string()),
  expectedOutcome: z.string(),
  positioningStatement: z.string(),
}).passthrough();
```
  </action>
  <verify>npx tsc --noEmit passes with no errors in schemas.ts</verify>
  <done>All 11 section schemas exist, export correctly, match TypeScript interfaces</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm ls zod` shows Zod installed
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] All 11 section schemas are exported from schemas.ts
- [ ] Schemas match the structure in output-types.ts
</verification>

<success_criteria>
- Zod installed as dependency
- All 11 media plan section schemas created
- Schemas compile without TypeScript errors
- Schemas are ready for use in validation
</success_criteria>

<output>
After completion, create `.planning/phases/01-json-handling/01-01-SUMMARY.md`
</output>
