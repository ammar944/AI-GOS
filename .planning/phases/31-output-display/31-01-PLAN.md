---
phase: 31-output-display
plan: 01
type: execute
---

<objective>
Build Document Editor window component with traffic lights, line numbers, and streaming cursor.

Purpose: Create the foundational editor component for displaying blueprints with premium v2.0 design aesthetics.
Output: DocumentEditor component with WindowChrome, LineNumbers, and StreamingCursor subcomponents.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/docs/AI-GOS-DESIGN-SYSTEM.md

**Design system patterns to follow:**
- Document Editor Window section in design system (traffic lights, line numbers, streaming cursor)
- GradientBorder wrapper with animate prop for streaming state
- Geist Mono for code/data content
- Color tokens from CSS variables (--bg-base, --bg-elevated, --text-primary, etc.)

**Relevant source files:**
@src/components/ui/gradient-border.tsx
@src/lib/motion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DocumentEditor component with WindowChrome</name>
  <files>src/components/editor/document-editor.tsx, src/components/editor/index.ts</files>
  <action>
Create DocumentEditor component following design system spec:

1. Create src/components/editor/document-editor.tsx:
   - WindowChrome subcomponent with traffic lights (red/yellow/green dots 12px)
   - Filename tab display with monospace font
   - GradientBorder wrapper with animate prop controlled by isStreaming
   - Container with --bg-elevated background

2. Props interface:
   - content: string (the text content to display)
   - filename?: string (default "blueprint.md")
   - isStreaming?: boolean (controls animated border)
   - className?: string

3. Styling (inline with CSS variables):
   - Window chrome: gradient background (#141414 to #0a0a0a)
   - Border bottom: var(--border-subtle)
   - Traffic lights: #ff5f57, #febc2e, #28c840 with 8px gap
   - Filename tab: var(--bg-hover), 6px radius, 12px font, Geist Mono

4. Create barrel export at src/components/editor/index.ts

Reference design system "Document Editor Window" section.
  </action>
  <verify>
- Import DocumentEditor in a test file and verify it renders
- Traffic lights appear correctly (red, yellow, green)
- Filename tab displays with monospace font
- No TypeScript errors
  </verify>
  <done>
DocumentEditor component renders window chrome with traffic lights, filename tab, and GradientBorder wrapper. TypeScript compiles without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add LineNumbers component and content area</name>
  <files>src/components/editor/document-editor.tsx</files>
  <action>
Extend DocumentEditor with LineNumbers column and content area:

1. LineNumbers subcomponent:
   - Calculate line count from content.split('\n').length
   - Right-aligned numbers with var(--text-quaternary) color (#444)
   - 12px Geist Mono font
   - Padding 20px, border-right var(--border-subtle)
   - Background var(--bg-surface) with 0.01 opacity
   - userSelect: 'none' to prevent copying line numbers

2. Content area:
   - Flex layout: LineNumbers column + content column
   - Content column: flex-1, padding 20px
   - Geist Mono font, 13px size, 1.8 line height
   - Color var(--text-secondary) for base text
   - minHeight 450px

3. Render content as lines:
   - Split content by newlines
   - Each line gets its own div with matching line number

Design system reference: "Editor content with line numbers" section
  </action>
  <verify>
- Line numbers appear in left column
- Numbers are right-aligned and use quaternary text color
- Content appears in right column with proper monospace font
- Line numbers match content line count
  </verify>
  <done>
DocumentEditor displays line numbers column with proper styling and content area with Geist Mono typography. Lines are numbered correctly.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create StreamingCursor component</name>
  <files>src/components/editor/streaming-cursor.tsx, src/components/editor/document-editor.tsx, src/components/editor/index.ts</files>
  <action>
Create StreamingCursor component for streaming text indication:

1. Create src/components/editor/streaming-cursor.tsx:
   - Framer Motion animated span
   - Blinking opacity animation: [1, 0] with 0.4s duration, repeat Infinity
   - Dimensions: 10px width, 20px height
   - Gradient background: linear-gradient(180deg, #3b82f6, #8b5cf6)
   - Border radius 2px
   - Box shadow for glow: 0 0 20px rgba(59,130,246,0.5)
   - Vertical align: text-bottom
   - Margin left: 2px

2. Integrate into DocumentEditor:
   - Show StreamingCursor at end of content when isStreaming=true
   - Cursor appears after the last character

3. Export from barrel file

Design system reference: "Streaming Cursor" section
  </action>
  <verify>
- StreamingCursor blinks with gradient colors
- Glow effect visible around cursor
- Cursor only appears when isStreaming=true
- Cursor positioned correctly at end of text
  </verify>
  <done>
StreamingCursor component animates correctly with gradient blink and glow. Integrates with DocumentEditor streaming state.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] DocumentEditor renders with all subcomponents
- [ ] Traffic lights, line numbers, and streaming cursor all function correctly
- [ ] Styling matches v2.0 design system specifications
</verification>

<success_criteria>
- DocumentEditor component fully implemented with WindowChrome, LineNumbers, StreamingCursor
- All components use v2.0 design tokens (CSS variables)
- Framer Motion animations work correctly
- TypeScript compiles without errors
- Components exported from barrel file
</success_criteria>

<output>
After completion, create `.planning/phases/31-output-display/31-01-SUMMARY.md`
</output>
